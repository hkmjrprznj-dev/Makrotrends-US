<!DOCTYPE html>

<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>US Markt Dashboard - Bewertungs√ºbersicht</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

```
<script type="text/babel">
    const { useState, useEffect } = React;

    // Icon-Komponenten
    const TrendingUp = ({ className, style }) => (
        <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
            <polyline points="17 6 23 6 23 12"></polyline>
        </svg>
    );

    const TrendingDown = ({ className, style }) => (
        <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
            <polyline points="17 18 23 18 23 12"></polyline>
        </svg>
    );

    const AlertCircle = ({ className }) => (
        <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
    );

    const Activity = ({ className, style }) => (
        <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
        </svg>
    );

    const DollarSign = ({ className, style }) => (
        <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <line x1="12" y1="1" x2="12" y2="23"></line>
            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
        </svg>
    );

    const Gauge = ({ className }) => (
        <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"></path>
        </svg>
    );

    const RefreshCw = ({ className }) => (
        <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="23 4 23 10 17 10"></polyline>
            <polyline points="1 20 1 14 7 14"></polyline>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
        </svg>
    );

    const Check = ({ className }) => (
        <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
    );

    const X = ({ className }) => (
        <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
    );

    const MarketDashboard = () => {
        const [indicators, setIndicators] = useState({});
        const [lastUpdate, setLastUpdate] = useState(null);
        const [loading, setLoading] = useState(true);
        const [updating, setUpdating] = useState(false);
        const [autoDataStatus, setAutoDataStatus] = useState({});

        useEffect(() => {
            loadData();
        }, []);

        const loadData = () => {
            try {
                const saved = localStorage.getItem('market-indicators');
                if (saved) {
                    const data = JSON.parse(saved);
                    setIndicators(data.indicators || {});
                    setLastUpdate(data.lastUpdate);
                    setAutoDataStatus(data.autoDataStatus || {});
                }
            } catch (error) {
                console.log('Keine gespeicherten Daten gefunden');
            }
            setLoading(false);
        };

        const saveData = (data, status = null) => {
            try {
                const saveObj = {
                    indicators: data,
                    lastUpdate: new Date().toISOString(),
                    autoDataStatus: status || autoDataStatus
                };
                localStorage.setItem('market-indicators', JSON.stringify(saveObj));
                setLastUpdate(new Date().toISOString());
                if (status) setAutoDataStatus(status);
            } catch (error) {
                console.error('Fehler beim Speichern:', error);
            }
        };

        const fetchAutomaticData = async () => {
            setUpdating(true);
            const newIndicators = { ...indicators };
            const status = {};

            try {
                // VIX
                try {
                    const vixResponse = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/%5EVIX?interval=1d&range=1d');
                    const vixData = await vixResponse.json();
                    const vixValue = vixData.chart.result[0].meta.regularMarketPrice;
                    newIndicators.vix = Math.round(vixValue * 100) / 100;
                    status.vix = { success: true, timestamp: new Date().toISOString() };
                } catch (error) {
                    status.vix = { success: false, error: 'Abruf fehlgeschlagen' };
                }

                // Zinskurve
                try {
                    const treasury10y = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/%5ETNX?interval=1d&range=1d');
                    const treasury2y = await fetch('https://query1.finance.yahoo.com/v8/finance/chart/%5ETWO?interval=1d&range=1d');
                    
                    const data10y = await treasury10y.json();
                    const data2y = await treasury2y.json();
                    
                    const yield10y = data10y.chart.result[0].meta.regularMarketPrice;
                    const yield2y = data2y.chart.result[0].meta.regularMarketPrice;
                    
                    newIndicators.yieldCurve = Math.round((yield10y - yield2y) * 100) / 100;
                    status.yieldCurve = { success: true, timestamp: new Date().toISOString() };
                } catch (error) {
                    status.yieldCurve = { success: false, error: 'Abruf fehlgeschlagen' };
                }

                setIndicators(newIndicators);
                saveData(newIndicators, status);
                
            } catch (error) {
                console.error('Fehler beim Datenabruf:', error);
            }
            
            setUpdating(false);
        };

        const updateIndicator = (key, value) => {
            const updated = { ...indicators, [key]: parseFloat(value) };
            setIndicators(updated);
            saveData(updated);
        };

        const getSignal = (indicator) => {
            const config = indicatorConfig[indicator];
            const value = indicators[indicator];
            
            if (!value || !config) return 'neutral';
            
            if (config.signals) {
                if (value <= config.signals.good) return 'good';
                if (value <= config.signals.neutral) return 'neutral';
                return 'bad';
            }
            
            if (config.reverseSignals) {
                if (value >= config.reverseSignals.good) return 'good';
                if (value >= config.reverseSignals.neutral) return 'neutral';
                return 'bad';
            }
            
            return 'neutral';
        };

        const getOverallSignal = () => {
            const signals = Object.keys(indicatorConfig).map(key => getSignal(key));
            const goodCount = signals.filter(s => s === 'good').length;
            const badCount = signals.filter(s => s === 'bad').length;
            
            if (badCount > goodCount + 2) return 'overvalued';
            if (goodCount > badCount + 2) return 'undervalued';
            return 'fair';
        };

        const indicatorConfig = {
            shillerPE: {
                name: 'Shiller P/E (CAPE)',
                category: 'valuation',
                description: 'Zyklisch bereinigtes KGV',
                unit: '',
                signals: { good: 20, neutral: 25 },
                source: 'https://www.multpl.com/shiller-pe',
                info: 'Historischer Durchschnitt: ~16-17. √úber 25 = √ºberteuert',
                auto: false
            },
            buffett: {
                name: 'Buffett-Indikator',
                category: 'valuation',
                description: 'Marktkapitalisierung / BIP',
                unit: '%',
                signals: { good: 100, neutral: 140 },
                source: 'https://www.currentmarketvaluation.com/models/buffett-indicator.php',
                info: '√úber 140% historisch √ºberteuert',
                auto: false
            },
            sp500PE: {
                name: 'S&P 500 P/E',
                category: 'valuation',
                description: 'Aktuelles Kurs-Gewinn-Verh√§ltnis',
                unit: '',
                signals: { good: 18, neutral: 22 },
                source: 'https://www.multpl.com/s-p-500-pe-ratio',
                info: 'Historischer Durchschnitt: ~15-16',
                auto: false
            },
            vix: {
                name: 'VIX (Fear Index)',
                category: 'sentiment',
                description: 'Volatilit√§tsindex',
                unit: '',
                reverseSignals: { good: 20, neutral: 15 },
                info: 'Unter 15 = Selbstzufriedenheit. √úber 30 = Panik',
                auto: true
            },
            fearGreed: {
                name: 'Fear & Greed Index',
                category: 'sentiment',
                description: 'CNN Sentiment Index',
                unit: '',
                reverseSignals: { good: 45, neutral: 55 },
                source: 'https://edition.cnn.com/markets/fear-and-greed',
                info: '0-25 = Extreme Fear, 75-100 = Extreme Greed',
                auto: false
            },
            unemployment: {
                name: 'Arbeitslosenquote',
                category: 'macro',
                description: 'US Unemployment Rate',
                unit: '%',
                signals: { good: 4.5, neutral: 5.5 },
                source: 'https://www.bls.gov/news.release/empsit.nr0.htm',
                info: 'Unter 4% sehr gut, √ºber 6% problematisch',
                auto: false
            },
            inflation: {
                name: 'Inflation (CPI)',
                category: 'macro',
                description: 'Verbraucherpreisindex YoY',
                unit: '%',
                signals: { good: 2.5, neutral: 3.5 },
                source: 'https://www.bls.gov/cpi/',
                info: 'Fed-Ziel: 2%. √úber 3% problematisch',
                auto: false
            },
            fedRate: {
                name: 'Fed Funds Rate',
                category: 'macro',
                description: 'US Leitzins',
                unit: '%',
                source: 'https://www.federalreserve.gov/releases/h15/',
                info: 'H√∂here Zinsen = Gegenwind f√ºr Aktien',
                auto: false
            },
            yieldCurve: {
                name: 'Zinskurve (10Y-2Y)',
                category: 'macro',
                description: 'Treasury Spread',
                unit: '%',
                reverseSignals: { good: 0.5, neutral: 0 },
                info: 'Negativ = Rezessionswarnung',
                auto: true
            }
        };

        const categories = {
            valuation: { name: 'Bewertung', icon: DollarSign, color: '#3b82f6' },
            sentiment: { name: 'Sentiment', icon: Activity, color: '#a855f7' },
            macro: { name: 'Makro√∂konomie', icon: TrendingUp, color: '#10b981' }
        };

        const SignalBadge = ({ signal }) => {
            const configs = {
                good: { bg: 'bg-green-100', text: 'text-green-800', label: 'Attraktiv' },
                neutral: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'Neutral' },
                bad: { bg: 'bg-red-100', text: 'text-red-800', label: '√úberteuert' }
            };
            
            const config = configs[signal] || configs.neutral;
            
            return (
                <span className={`px-3 py-1 rounded-full text-xs font-semibold ${config.bg} ${config.text}`}>
                    {config.label}
                </span>
            );
        };

        const OverallSignal = () => {
            const signal = getOverallSignal();
            const configs = {
                undervalued: { 
                    bg: 'from-green-500 to-green-600', 
                    icon: TrendingDown, 
                    text: 'MARKT UNTERBEWERTET',
                    desc: 'Gute Kaufgelegenheit'
                },
                fair: { 
                    bg: 'from-yellow-500 to-yellow-600', 
                    icon: Gauge, 
                    text: 'MARKT FAIR BEWERTET',
                    desc: 'Gemischte Signale'
                },
                overvalued: { 
                    bg: 'from-red-500 to-red-600', 
                    icon: AlertCircle, 
                    text: 'MARKT √úBERBEWERTET',
                    desc: 'Vorsicht geboten'
                }
            };
            
            const config = configs[signal];
            const Icon = config.icon;
            
            return (
                <div className={`bg-gradient-to-r ${config.bg} rounded-2xl p-8 text-white shadow-xl mb-8`}>
                    <div className="flex items-center justify-between flex-wrap gap-4">
                        <div>
                            <div className="flex items-center gap-3 mb-2">
                                <Icon className="w-10 h-10" />
                                <h2 className="text-3xl font-bold">{config.text}</h2>
                            </div>
                            <p className="text-xl opacity-90">{config.desc}</p>
                            {lastUpdate && (
                                <p className="text-sm opacity-75 mt-2">
                                    Letzte Aktualisierung: {new Date(lastUpdate).toLocaleString('de-DE')}
                                </p>
                            )}
                        </div>
                        <button
                            onClick={fetchAutomaticData}
                            disabled={updating}
                            className="bg-white/20 hover:bg-white/30 px-6 py-3 rounded-xl font-semibold transition-all flex items-center gap-2 disabled:opacity-50"
                        >
                            <RefreshCw className={`w-5 h-5 ${updating ? 'animate-spin' : ''}`} />
                            {updating ? 'Aktualisiere...' : 'Daten aktualisieren'}
                        </button>
                    </div>
                </div>
            );
        };

        if (loading) {
            return (
                <div className="min-h-screen bg-slate-50 flex items-center justify-center">
                    <div className="text-xl text-slate-600">Lade Dashboard...</div>
                </div>
            );
        }

        return (
            <div className="min-h-screen bg-slate-50 p-6">
                <div className="max-w-7xl mx-auto">
                    <div className="mb-8">
                        <h1 className="text-4xl font-bold text-slate-800 mb-2">US Markt Dashboard</h1>
                        <p className="text-slate-600">Bewertungs√ºbersicht f√ºr den amerikanischen Aktienmarkt</p>
                    </div>

                    <OverallSignal />

                    {Object.entries(categories).map(([catKey, category]) => {
                        const Icon = category.icon;
                        const categoryIndicators = Object.entries(indicatorConfig)
                            .filter(([_, config]) => config.category === catKey);

                        return (
                            <div key={catKey} className="mb-8">
                                <div className="flex items-center gap-3 mb-4">
                                    <Icon className="w-6 h-6" style={{ color: category.color }} />
                                    <h2 className="text-2xl font-bold text-slate-800">{category.name}</h2>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                    {categoryIndicators.map(([key, config]) => {
                                        const status = autoDataStatus[key];
                                        
                                        return (
                                            <div key={key} className="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow">
                                                <div className="flex justify-between items-start mb-3">
                                                    <div className="flex-1">
                                                        <div className="flex items-center gap-2 mb-1">
                                                            <h3 className="font-semibold text-slate-800 text-lg">{config.name}</h3>
                                                            {config.auto && (
                                                                <span className="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded">
                                                                    Auto
                                                                </span>
                                                            )}
                                                        </div>
                                                        <p className="text-sm text-slate-500">{config.description}</p>
                                                    </div>
                                                    <SignalBadge signal={getSignal(key)} />
                                                </div>

                                                {status && (
                                                    <div className={`text-xs mb-2 flex items-center gap-1 ${status.success ? 'text-green-600' : 'text-red-600'}`}>
                                                        {status.success ? <Check className="w-3 h-3" /> : <X className="w-3 h-3" />}
                                                        {status.success ? (status.note || 'Automatisch aktualisiert') : status.error}
                                                    </div>
                                                )}

                                                <div className="mb-3">
                                                    <div className="flex items-center gap-2">
                                                        <input
                                                            type="number"
                                                            step="0.01"
                                                            placeholder="Wert eingeben"
                                                            value={indicators[key] || ''}
                                                            onChange={(e) => updateIndicator(key, e.target.value)}
                                                            className="flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                                        />
                                                        {config.unit && (
                                                            <span className="text-slate-600 font-medium">{config.unit}</span>
                                                        )}
                                                    </div>
                                                    {indicators[key] && (
                                                        <div className="mt-2 text-2xl font-bold text-slate-800">
                                                            {indicators[key]}{config.unit}
                                                        </div>
                                                    )}
                                                </div>

                                                <div className="text-xs text-slate-500 bg-slate-50 p-2 rounded mb-2">
                                                    üí° {config.info}
                                                </div>

                                                {config.source && (
                                                    <a
                                                        href={config.source}
                                                        target="_blank"
                                                        rel="noopener noreferrer"
                                                        className="text-xs text-blue-600 hover:underline inline-block"
                                                    >
                                                        Quelle √∂ffnen ‚Üí
                                                    </a>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        );
                    })}

                    <div className="bg-blue-50 border border-blue-200 rounded-xl p-6 mt-8">
                        <h3 className="font-semibold text-blue-900 mb-2 flex items-center gap-2">
                            <AlertCircle className="w-5 h-5" />
                            Hinweise zur Nutzung
                        </h3>
                        <ul className="text-sm text-blue-800 space-y-1">
                            <li>‚Ä¢ Klicke auf "Daten aktualisieren" um automatische Indikatoren zu laden (VIX, Zinskurve)</li>
                            <li>‚Ä¢ Indikatoren mit "Auto" Badge werden automatisch abgerufen</li>
                            <li>‚Ä¢ Alle anderen Indikatoren m√ºssen manuell √ºber die verlinkten Quellen eingegeben werden</li>
                            <li>‚Ä¢ Alle Eingaben werden im Browser gespeichert (localStorage)</li>
                            <li>‚Ä¢ Die Gesamtbewertung basiert auf der Kombination aller Indikatoren</li>
                        </ul>
                    </div>
                </div>
            </div>
        );
    };

    ReactDOM.render(<MarketDashboard />, document.getElementById('root'));
</script>
```

</body>
</html>
